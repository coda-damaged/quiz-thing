<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Python Final Practice Quiz</title>
<style>
  body { font-family: Arial, sans-serif; background: #f4f4f8; margin: 0; padding: 2em; text-align: center; }
  #quiz { max-width: 650px; margin: auto; background: white; padding: 2em; border-radius: 15px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
  button { display: block; width: 100%; margin: 8px 0; padding: 10px; border: none; border-radius: 8px; background: #eee; cursor: pointer; font-size: 1em; }
  button:hover { background: #ddd; }
  .correct { background: #b6e3b6 !important; }
  .wrong { background: #f3b6b6 !important; }
  #next { margin-top: 20px; padding: 10px 20px; background: #007BFF; color: white; border: none; border-radius: 8px; cursor: pointer; }
  #next:hover { background: #0056b3; }
  #explanation { margin-top: 15px; padding: 12px; background: #f1f1f1; border-radius: 8px; display: none; text-align: left; }
</style>
</head>
<body>

<h1>Python Final Practice Quiz</h1>

<div id="quiz">
  <h2 id="question">Loadingâ€¦</h2>
  <div id="answers"></div>
  <div id="explanation"></div>
  <button id="next" style="display:none;">Next</button>
  <p id="score"></p>
</div>

<script>
let questions = [];
let current = 0;
let score = 0;

async function loadQuiz() {
  try {
    const res = await fetch("final.csv");
    const text = await res.text();
    const lines = text.trim().split("\n").slice(1);

    questions = lines.map(line => {
      const [q, correct, w1, w2, w3, explanation] = line.split(",");
      return {
        q,
        correct,
        explanation,
        options: [correct, w1, w2, w3].sort(() => Math.random() - 0.5)
      };
    });

    showQuestion();
  } catch (e) {
    document.getElementById("question").innerText = "âŒ Could not load final.csv";
    console.error(e);
  }
}

function showQuestion() {
  const q = questions[current];
  document.getElementById("question").innerText = q.q;
  document.getElementById("explanation").style.display = "none";

  const answersDiv = document.getElementById("answers");
  answersDiv.innerHTML = "";

  q.options.forEach(opt => {
    const btn = document.createElement("button");
    btn.textContent = opt;
    btn.onclick = () => selectAnswer(btn, q);
    answersDiv.appendChild(btn);
  });

  document.getElementById("next").style.display = "none";
}

function selectAnswer(button, q) {
  const buttons = document.querySelectorAll("#answers button");
  buttons.forEach(b => b.disabled = true);

  if (button.textContent === q.correct) {
    button.classList.add("correct");
    score++;
  } else {
    button.classList.add("wrong");
    [...buttons].find(b => b.textContent === q.correct).classList.add("correct");
  }

  document.getElementById("explanation").innerHTML =
    `<strong>Explanation:</strong><br>${q.explanation}`;
  document.getElementById("explanation").style.display = "block";

  document.getElementById("next").style.display = "inline-block";
  document.getElementById("score").innerText = `Score: ${score} / ${questions.length}`;
}

document.getElementById("next").onclick = () => {
  current++;
  if (current < questions.length) {
    showQuestion();
  } else {
    document.getElementById("quiz").innerHTML =
      `<h2>ðŸŽ‰ You scored ${score} / ${questions.length}</h2>`;
  }
};

loadQuiz();
</script>

</body>
</html>
